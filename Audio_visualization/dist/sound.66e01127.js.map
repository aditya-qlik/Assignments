{"version":3,"sources":["util.js","sound.js"],"names":["hslToRgb","h","s","l","r","g","b","hue2rgb","p","q","t","Math","round","WIDTH","HEIGHT","canvas","document","querySelector","ctx","getContext","width","height","analyzer","bufferLength","handleError","err","console","log","drawTimeData","timeData","getByteTimeDomainData","clearRect","lineWidth","strokeStyle","beginPath","sliceWidth","x","forEach","data","i","v","y","moveTo","lineTo","stroke","requestAnimationFrame","drawFrequencyData","frequencyData","getByteFrequencyData","barWidth","amount","percent","barHeight","fillStyle","fillRect","getAudio","stream","navigator","mediaDevices","getUserMedia","audio","catch","audioctx","AudioContext","createAnalyser","source","createMediaStreamSource","connect","fftSize","frequencyBinCount","Uint8Array"],"mappings":"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","file":"sound.66e01127.js","sourceRoot":"..","sourcesContent":["export function hslToRgb(h, s, l) {\n        let r;\n        let g;\n        let b;\n\n        if (s == 0) {\n                r = g = b = l; // achromatic\n        } else {\n                const hue2rgb = function hue2rgb(p, q, t) {\n                        if (t < 0) t += 1;\n                        if (t > 1) t -= 1;\n                        if (t < 1 / 6) return p + (q - p) * 6 * t;\n                        if (t < 1 / 2) return q;\n                        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                        return p;\n                };\n\n                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n                const p = 2 * l - q;\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n        }\n\n        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n}\n","import { hslToRgb } from './util.js';\n\nconst WIDTH = 1500;\nconst HEIGHT = 1500;\nconst canvas = document.querySelector('canvas');\nconst ctx = canvas.getContext('2d');\ncanvas.width = WIDTH;\ncanvas.height = HEIGHT;\nlet analyzer;\nlet bufferLength;\nfunction handleError(err) {\n        console.log('Check microphone permission');\n}\n\nfunction drawTimeData(timeData) {\n        analyzer.getByteTimeDomainData(timeData);\n        // console.log(timeData);\n        ctx.clearRect(0, 0, WIDTH, HEIGHT);\n        ctx.lineWidth = 10;\n        ctx.strokeStyle = '#ffc600';\n        ctx.beginPath();\n        const sliceWidth = WIDTH / bufferLength;\n        let x = 0;\n        timeData.forEach((data, i) => {\n                const v = data / 128;\n                const y = (v * HEIGHT) / 2;\n                if (i === 0) {\n                        ctx.moveTo(x, y);\n                } else {\n                        ctx.lineTo(x, y);\n                }\n                x += sliceWidth;\n        });\n        ctx.stroke();\n        requestAnimationFrame(() => drawTimeData(timeData));\n}\nfunction drawFrequencyData(frequencyData) {\n        analyzer.getByteFrequencyData(frequencyData);\n        const barWidth = (WIDTH / bufferLength) * 2.5;\n        let x = 0;\n        frequencyData.forEach(amount => {\n                // 0 to 255\n                const percent = amount / 255;\n                const [h, s, l] = [360 / (percent * 360) - 0.5, 0.8, 0.5];\n                const barHeight = HEIGHT * percent * 0.5;\n                const [r, g, b] = hslToRgb(h, s, l);\n                ctx.fillStyle = `rgb(${r},${g},${b})`;\n                ctx.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);\n                x += barWidth + 2;\n        });\n        requestAnimationFrame(() => drawFrequencyData(frequencyData));\n}\n\nasync function getAudio() {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true }).catch(handleError);\n        const audioctx = new AudioContext();\n        analyzer = audioctx.createAnalyser();\n        const source = audioctx.createMediaStreamSource(stream);\n        source.connect(analyzer);\n        // amount od data\n        analyzer.fftSize = 2 ** 10;\n        // get data from audio\n        bufferLength = analyzer.frequencyBinCount;\n        const timeData = new Uint8Array(bufferLength);\n        const frequencyData = new Uint8Array(bufferLength);\n        drawTimeData(timeData);\n        drawFrequencyData(frequencyData);\n}\n\ngetAudio();\n"]}